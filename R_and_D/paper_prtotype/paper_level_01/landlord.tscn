[gd_scene load_steps=5 format=1]

[ext_resource path="res://R_and_D/paper_prtotype/img/landlord.png" type="Texture" id=1]

[sub_resource type="GDScript" id=1]

resource/name = "landlord"
script/source = "#\t\t\t\t\tscript landlord\nextends Sprite\n\nvar first_conversation = {\n\t\n\t\"is_speach\":true,\n\t\"callback_end_functions\":[],\n\t\"spanish_words\":[],\n\t\"paused_dialog_adress\": null,\n\t#\tKEY\n#\t[branch addres , frame flow] : action...\n\t\t \t\t\t#S = SPEAK , speaker, audio clip/time code , dialog, [spanish words]] \n#\t\t\t(Greating)\n\t[\'A\',1]:[\'S\', 0 , null , \"Hola!\", [\'hola\']], # there sould probably be an update to this code where there is a extra feild where the \"adress of this discord is recorded for future playback\"\n\t[\'A\',2]:[\'S\', 0 , null , \"How are you\?!\", null],\n\t[\'A\',3]:[\'S\', 0 , null , \"Do you like your new home\?\", null],\n\t[\'A\',4]:[\'S\', 1 , null , \"Yes\", null],\n\t[\'A\',5]:[\'S\', 0 , null , \"Bien, bien!\", [\'bien\']],\n\t\n#\t\t\t(About the rent)\n\t[\'A\',6]:[\'S\', 0 , null , \"I\'ll be expecting you to pay the 75 dineros the 1th of every month\", [\'dinero\']],\n\t\t\t #C = CALLBACK_FUNCTION , Function_Node , function_name, [args...], schedualing, press_enter_to_continue]\n#\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t # N - Now # L - Later \n\t[\'A\',7]\t:[\'C\', 1, \"update_money\", [-75], \'N\', true],\n\t[\'A\',8]\t:[\'S\', 0 , null , \"I understand that you are looking for work\", null],\n\t[\'A\',9]\t:[\'S\', 1 , null , \"that\'s right\'\", null],\n\t[\'A\',10]:[\'S\', 0 , null , \"well, you might find some trabajo down by the docs\",[\'trabajo\']],\n\t[\'A\',11]:[\'S\', 0 , null , \"mhmm...\", null],\n\t[\'A\',12]:[\'S\', 0 , null , \"You will probably need to learn better español to get more stedy work though\", [\'español\']],\n\t[\'A\',13]:[\'S\', 0 , null , \"You do want to learn espanish right\?\", null],\n\t[\'A\',14]:[\'S\', 1 , null , \"Yes ofcorse\", null],\n\t[\'A\',15]:[\'S\', 0 , null , \"Then here is a house warming present for you\", null],\n\t[\'A\',16]:[\'C\', 1, \"add_to_inventory\", [\'Notebook\'], \'N\', true],\n\t[\'A\',17]:[\'S\', 0 , null , \"In this notebook you can write and review words\", null],\n\t[\'A\',18]:[\'S\', 0 , null , \"That will help you remember them\", null],\n\t[\'A\',19]:[\'S\', 1 , null , \"Cool\", null],\n\t[\'A\',20]:[\'S\', 0 , null , \"Yes, and also remeber, the most important thing for a good memory is to get full 8 hours of sleep\", null],\n\t\n\t[\'A\',21]:[\'C\', 0, \"show_arrow_on_clock\", null, \'N\', false],\n\t[\'A\',22]:[\'S\', 0 , null , \"so be sure to be back here before 10 at night\", null],\n\t[\'A\',23]:[\'S\', 1 , null , \"Got it, anything else\?\", null],\n\t[\'A\',24]:[\'S\', 0 , null , \"Yes don\'t forget to eat or you\'ll die\", null],\n\t[\'A\',25]:[\'S\', 1 , null , \"ha ha ha\", null],\n\t\n\t[\'A\',26]:[\'C\', 1, \"notebook_reminder\", [15], \'N\', false],\n\t\t\t  #E = END , speaker, audio clip/time code , dialog, [spanish words]] , function_name, [args]]\n\t[\'A\',27]:[\'E\', 0 , null , \"I need to get going, Adios\", [\'adios\'],\"go_away\", [\'none\']],\n\t\n\t\n\t\n\t\n}\n\n#\t\t\t\t\t\t\tVariables\nvar encounter = 0\n\nexport (NodePath) var time_and_level\n\nvar can_move = false\nvar move_speed = 5\nvar move_vector = Vector2()\nvar destination\n\nvar call_back_function_list = []\n\nexport (NodePath) var root_node\n\nfunc _ready():\n\t\n\n\tif(root_node != null): root_node = get_node(root_node)\n\ttime_and_level = get_node(time_and_level)\n\tcall_back_function_list.append(funcref(self ,\"go_away\"))\n\tset_process(true)\n\tpass\n\t\nfunc _process(delta):\n\tmove_landlord()\n\n\nfunc _on_collison_area_enter( area ):\n\tif(area.is_in_group(\"player\") and encounter == 0):\n\t\t\n\t\t\n#\t\troot_node.dialog_characters = []\n#\t\troot_node.dialog_characters.append(self)\n#\t\troot_node.dialog_characters.append(area.get_parent())\n#\t\troot_node.dialog = first_conversation\n#\t\t\n#\t\troot_node.change_state(\"CUT_SCENE\")\n\t\t\n\t\troot_node.start_conversation([self,area.get_parent()],first_conversation)\n\t\t\n\t\tpass\n\tpass\n\n\n\n#func _on_area_exit( area ):\n#\tif(root_node.what_is_the_current_state() == \"MOVE_AROUND\"): return\n#\t\n#\tif(area.is_in_group(\"player\") and root_node.GAME_STATE._CURRENT):\n#\t\troot_node.change_state(\"MOVE_AROUND\")\n#\tpass\n\t\nfunc dialog_callback(args):\n\tfor arg in args:\n\t\targ.call_func()\n\tpass\n\t\nfunc go_away(none):\n\tencounter += 1\n\tcan_move = true\n\tdestination = Vector2(1800,200)\n\tpass\n\nfunc move_landlord():\n\tif(!can_move): return\n\t#reset move_vector so it dosent increas expentional\n\tmove_vector *= 0\n\t\n\t# move player tworeds destination \n\tif(destination != null):\n\t\tif(destination.x <= get_pos().x): move_vector += Vector2(-1,0)\n\t\tif(destination.x >= get_pos().x): move_vector += Vector2(1,0)\n\t\tif(destination.y <= get_pos().y): move_vector += Vector2(0,-1)\n\t\tif(destination.y >= get_pos().y): move_vector += Vector2(0,1)\n\t\t\n\t\t#increas speed\n\t\tmove_vector *= move_speed\n\t\t\n\t\t#stabelaize the end movment\n\t\tvar x = get_pos().x\n\t\tvar y = get_pos().y\n\t\tvar dx = destination.x\n\t\tvar dy = destination.y\n\t\t\n\t\tif(abs(x - dx) < move_speed): \n\t\t\tx = dx\n\t\t\tmove_vector.x = 0\n\t\tif(abs(y - dy) < move_speed): \n\t\t\ty = dy\n\t\t\tmove_vector.y = 0\n\t\t\t\n\t\tset_pos(Vector2(x,y))\n\t\tset_pos(get_pos() + move_vector)\n\t\t\n\t\t\n\t\t\n\t\t\nfunc _dialog_callback_function(func_name_and_args):\n#\tprint(\"test_dialog_callback_function\")\n\tvar call_function = funcref(self,func_name_and_args[0])\n\tcall_function.call_func(func_name_and_args[1])\n\tpass\n\t\nfunc print_slap_x_amout_of_times(x_times_and_name):\n\tprint(\"x_times: \" + str(x_times_and_name[0]))\n\tfor  x in range(x_times_and_name[0]):\n\t\tprint(\"SLAP! \" + x_times_and_name[1])\n\tpass\n\t\nfunc show_arrow_on_clock(none):\n\ttime_and_level.show_arrow_on_clock()\n\tpass\n\t\n\t\n\t\n\n\n\n\n\n\n\n"

[sub_resource type="CapsuleShape2D" id=2]

custom_solver_bias = 0.0
radius = 45.942
height = 111.809

[sub_resource type="CapsuleShape2D" id=3]

custom_solver_bias = 0.0
radius = 107.012
height = 20.0

[node name="landlord" type="Sprite"]

transform/pos = Vector2( 506.717, 229.093 )
transform/scale = Vector2( 0.628205, 0.628205 )
texture = ExtResource( 1 )
script/script = SubResource( 1 )
time_and_level = null
root_node = null

[node name="personal_collison_area" type="Area2D" parent="." groups=[ "dragable" ]]

editor/display_folded = true
input/pickable = true
shapes/0/shape = SubResource( 2 )
shapes/0/transform = Matrix32( 1, 0, 0, 1, 0, 0 )
shapes/0/trigger = false
gravity_vec = Vector2( 0, 1 )
gravity = 98.0
linear_damp = 0.1
angular_damp = 1.0

[node name="personal_collison_shape" type="CollisionShape2D" parent="personal_collison_area"]

shape = SubResource( 2 )
trigger = false
_update_shape_index = 0

[node name="personal_space_area" type="Area2D" parent="."]

input/pickable = true
shapes/0/shape = SubResource( 3 )
shapes/0/transform = Matrix32( 1, 0, 0, 1, 1.29657, 74.6499 )
shapes/0/trigger = true
gravity_vec = Vector2( 0, 1 )
gravity = 98.0
linear_damp = 0.1
angular_damp = 1.0

[node name="personal_space" type="CollisionShape2D" parent="personal_space_area"]

transform/pos = Vector2( 1.29657, 74.6499 )
shape = SubResource( 3 )
trigger = true
_update_shape_index = 0

[connection signal="area_enter" from="personal_collison_area" to="." method="_on_collison_area_enter"]

[connection signal="area_exit" from="personal_collison_area" to="." method="_on_area_exit"]

[connection signal="area_enter" from="personal_space_area" to="." method="_on_collison_area_enter"]

[connection signal="area_exit" from="personal_space_area" to="." method="_on_area_exit"]


