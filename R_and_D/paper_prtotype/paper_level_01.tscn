[gd_scene load_steps=17 format=1]

[ext_resource path="res://R_and_D/paper_prtotype/paper_level_01/paper_level_01-main_logic.gd" type="Script" id=1]
[ext_resource path="res://R_and_D/paper_prtotype/img/level_01.png" type="Texture" id=2]
[ext_resource path="res://R_and_D/paper_prtotype/paper_level_01/player.tscn" type="PackedScene" id=3]
[ext_resource path="res://R_and_D/paper_prtotype/utils/dot.tscn" type="PackedScene" id=4]
[ext_resource path="res://R_and_D/paper_prtotype/utils/words_poping.tscn" type="PackedScene" id=5]
[ext_resource path="res://R_and_D/paper_prtotype/paper_level_01/landlord.tscn" type="PackedScene" id=6]
[ext_resource path="res://R_and_D/paper_prtotype/utils/mouse_drag_items.tscn" type="PackedScene" id=7]
[ext_resource path="res://R_and_D/paper_prtotype/utils/notepad_icon.tscn" type="PackedScene" id=8]
[ext_resource path="res://R_and_D/paper_prtotype/utils/time_and_level.tscn" type="PackedScene" id=9]
[ext_resource path="res://R_and_D/paper_prtotype/utils/cutscene.tscn" type="PackedScene" id=10]

[sub_resource type="GDScript" id=1]

resource/name = "words_poping_anchor"
script/source = "#\t\t\t\t\twords_poping_anchor\nextends Node2D\n\nexport (PackedScene) var words_poping\nexport (NodePath) var notepad\nexport (NodePath) var root_node\n\nvar spanish_words_list = [] setget set_spanish_words_list\nvar words = []\n\nvar stasionary_position\nvar timer = Timer.new()\n\nvar dircetion = 1\n\nfunc _ready():\n\tnotepad = get_node(notepad)\n\troot_node = get_node(root_node)\n\tstasionary_position = get_pos()\n\t\n\ttimer.set_one_shot(true)\n\ttimer.set_wait_time(8)\n\tadd_child(timer)\n\ttimer.connect(\"timeout\",self,\"turn_of_fixed_procces\")\n\tpass\n\nfunc set_spanish_words_list(list):\n\tspanish_words_list = list\n\t\n\tfor w in spanish_words_list:\n\t\tnew_coin(w)\n\tpass\n\t\nfunc _fixed_process(delta):\n\tset_global_pos(stasionary_position)\n\tpass\n\nfunc turn_of_fixed_procces():\n\tset_fixed_process(false)\n\tset_pos(get_parent().get_pos())\n\tset_global_pos(get_parent().get_global_pos())\n\t\n\nfunc new_coin(word_txt):\n\tvar word = words_poping.instance()\n\tword.direction = dircetion\n\tadd_child(word)\n\tdircetion = dircetion * -1\n\tword.notepad_position = notepad.get_global_pos()\n\tword.change_word(word_txt)\n\twords.append(word)\n\tstasionary_position = get_global_pos()\n\tset_fixed_process(true)\n\ttimer.start()\n\tpass"

[sub_resource type="GDScript" id=2]

script/source = "extends Button\n\nvar state_switch = 1\n\nfunc _ready():\n\tpass\n\n\nfunc _on_switch_states_pressed():\n\tvar root_node = get_parent().get_parent().get_node(\".\")\n\t\n#\tprint(root_node.change_state(state_switch))\n\t\n\tif(state_switch == 1): state_switch += 1\n\telse: state_switch -= 1\n\tpass\n"

[sub_resource type="Animation" id=3]

length = 1.0
loop = false
step = 0.1
tracks/0/type = "value"
tracks/0/path = NodePath(".:rect/pos")
tracks/0/interp = 1
tracks/0/imported = false
tracks/0/keys = { "times":FloatArray( 0, 0.5, 1 ), "transitions":FloatArray( -4, -4, 1 ), "update":0, "values":[ Vector2( 608, 352 ), Vector2( 674, 319 ), Vector2( 761, 503 ) ] }
tracks/1/type = "value"
tracks/1/path = NodePath(".:rect/scale")
tracks/1/interp = 1
tracks/1/imported = false
tracks/1/keys = { "times":FloatArray( 0, 0.5, 1 ), "transitions":FloatArray( 1, 1, 1 ), "update":0, "values":[ Vector2( 1, 1 ), Vector2( 1.3, 1.3 ), Vector2( 1, 1 ) ] }
tracks/2/type = "value"
tracks/2/path = NodePath(".:visibility/opacity")
tracks/2/interp = 1
tracks/2/imported = false
tracks/2/keys = { "times":FloatArray( 0, 0.5 ), "transitions":FloatArray( 1, 1 ), "update":0, "values":[ 0.0, 1.0 ] }

[sub_resource type="GDScript" id=4]

script/source = "extends Node\n\nexport (NodePath) var root_node\n\nvar is_admin = false\n\n\nfunc _ready():\n\troot_node = get_node(root_node)\n\tset_process_input(true)\n\tpass\n\n\nfunc _input(event):\n\tif(Input.is_action_pressed(\"control\") and Input.is_action_pressed(\"A\")):\n\t\tif(!is_admin): admin_enable()\n\t\telse: admin_disable()\n\n\nfunc admin_enable():\n\troot_node.get_node(\"player\").can_move = false\n\troot_node.get_node(\"mouse_drag_items\").is_active = true\n\tis_admin = true\n\troot_node.write_to_term(\"admin enabled\")\n\t\n\t\nfunc admin_disable():\n\troot_node.get_node(\"player\").can_move = true\n\troot_node.get_node(\"mouse_drag_items\").is_active = false\n\tis_admin = false\n\troot_node.write_to_term(\"admin disabled\")\n#\troot_node.run_states_once()\n\t"

[sub_resource type="GDScript" id=5]

script/source = "extends Node\n\n\nfunc _ready():\n\tset_process_input(true)\n\tpass\n\t\nfunc _input(event):\n\tif(Input.is_action_pressed(\"control\") and Input.is_action_pressed(\"R\")):\n\t\tget_tree().reload_current_scene()\n\t\n\n"

[sub_resource type="GDScript" id=6]

resource/name = "mvp_timer"
script/source = "extends Label\n\nvar timer = null\n\n\nfunc _ready():\n\t\n\ttimer = Timer.new()\n\tadd_child(timer)\n\ttimer.set_one_shot(true)\n\ttimer.set_wait_time(2)\n\t\n\tdo_transition()\n\tpass\n\t\nfunc do_transition():\n\ttimer.start()\n\tyield(timer,\'timeout\')\n\tself.hide()\n\t\n\ttimer.start()\n\tyield(timer,\'timeout\')\n\tself.show()\n\t\n\ttimer.start()\n\tyield(timer,\'timeout\')\n#\tprint(\"yield test\")\n\t\n\tpass"

[node name="paper_level_01" type="Node"]

script/script = ExtResource( 1 )

[node name="level_01" type="Sprite" parent="."]

transform/pos = Vector2( 495.077, 299.661 )
transform/scale = Vector2( 0.628221, 0.628221 )
texture = ExtResource( 2 )
__meta__ = { "_edit_lock_":true }

[node name="player" parent="." instance=ExtResource( 3 )]

editor/display_folded = true
transform/pos = Vector2( 785.986, 132.945 )
z/z = 1
dot = ExtResource( 4 )
root_node = NodePath("..")
notepad_node = NodePath("../ui/notepad_icon")
time_and_money = NodePath("../ui/time_level_anchor/time_and_level")

[node name="words_poping_anchor" type="Node2D" parent="player"]

transform/scale = Vector2( 1.50616, 1.66924 )
z/relative = false
script/script = SubResource( 1 )
__meta__ = { "_edit_group_":true, "_edit_lock_":true }
words_poping = ExtResource( 5 )
notepad = NodePath("../../ui/notepad_icon/notpad_container/behind_notpad")
root_node = NodePath("../..")

[node name="landlord" parent="." instance=ExtResource( 6 )]

transform/pos = Vector2( 558.806, 260.987 )
time_and_level = NodePath("../ui/time_level_anchor/time_and_level")
root_node = NodePath("..")

[node name="term" type="TextEdit" parent="."]

editor/display_folded = true
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 64.0
margin/top = 352.0
margin/right = 225.0
margin/bottom = 466.0
syntax_highlighting = false
show_line_numbers = false
highlight_all_occurrences = false
caret/block_caret = false
caret/caret_blink = false
caret/caret_blink_speed = 0.65

[node name="switch_states" type="Button" parent="term"]

visibility/visible = false
focus/ignore_mouse = false
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 2
margin/left = 0.0
margin/top = 160.0
margin/right = 70.0
margin/bottom = 204.0
toggle_mode = false
enabled_focus_mode = 2
shortcut = null
flat = false
script/script = SubResource( 2 )

[node name="mouse_drag_items" parent="." instance=ExtResource( 7 )]

[node name="ui" type="Node2D" parent="."]

editor/display_folded = true
transform/pos = Vector2( 480, 193 )
transform/scale = Vector2( 0.5, 0.5 )
__meta__ = { "_edit_lock_":true }

[node name="notepad_icon" parent="ui" instance=ExtResource( 8 )]

editor/display_folded = true
visibility/visible = false
margin/left = 761.0
margin/top = 503.0
margin/right = 953.0
margin/bottom = 717.0

[node name="behind_notpad" type="Position2D" parent="ui/notepad_icon/notpad_container"]

transform/pos = Vector2( 10, -8 )

[node name="notepad_anim" type="AnimationPlayer" parent="ui/notepad_icon"]

playback/process_mode = 1
playback/default_blend_time = 0.0
root/root = NodePath("..")
anims/apear = SubResource( 3 )
playback/active = true
playback/speed = 1.0
blend_times = [  ]
autoplay = ""

[node name="time_level_anchor" type="Node2D" parent="ui"]

transform/pos = Vector2( 448, -498 )
transform/scale = Vector2( 0.6, 0.6 )

[node name="time_and_level" parent="ui/time_level_anchor" instance=ExtResource( 9 )]

editor/display_folded = true
root_node = NodePath("../../..")

[node name="ui_money_update" parent="ui/time_level_anchor/time_and_level"]

editor/display_folded = false

[node name="ui_money_update_img" parent="ui/time_level_anchor/time_and_level/ui_money_update/anim_anchor"]

z/z = 2

[node name="cutscene" parent="." instance=ExtResource( 10 )]

root_node = NodePath("..")
player_node = NodePath("../player")

[node name="admin_mode" type="Node" parent="."]

editor/display_folded = true
script/script = SubResource( 4 )
root_node = NodePath("..")

[node name="reset" type="Node" parent="admin_mode"]

script/script = SubResource( 5 )

[node name="notebook" type="Node2D" parent="."]

[node name="Label" type="Label" parent="."]

focus/ignore_mouse = true
focus/stop_mouse = true
size_flags/horizontal = 2
size_flags/vertical = 0
margin/left = 896.0
margin/top = 32.0
margin/right = 992.0
margin/bottom = 64.0
text = "MVP"
percent_visible = 1.0
lines_skipped = 0
max_lines_visible = -1
script/script = SubResource( 6 )

[connection signal="mouse_enter" from="term" to="." method="can_place_movement_dot_switch" binds= [ false ]]

[connection signal="mouse_exit" from="term" to="." method="can_place_movement_dot_switch" binds= [ true ]]

[connection signal="pressed" from="term/switch_states" to="term/switch_states" method="_on_switch_states_pressed"]

[connection signal="mouse_enter" from="ui/notepad_icon" to="." method="can_place_movement_dot_switch" binds= [ false ]]

[connection signal="mouse_exit" from="ui/notepad_icon" to="." method="can_place_movement_dot_switch" binds= [ true ]]

[connection signal="visibility_changed" from="ui/notepad_icon" to="ui/notepad_icon" method="_on_notepad_icon_visibility_changed"]


[editable path="ui/notepad_icon"]
[editable path="ui/time_level_anchor/time_and_level"]
